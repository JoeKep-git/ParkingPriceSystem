<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type='text/javascript' src='https://www.bing.com/api/maps/mapcontrol?callback=GetMap&key=ApXX9iOE9c3LpsdUBeX9eiWaaPhbdEpSzlAM3uwFsspQocDgyW1eE9xXFyYZlfmM' async defer></script>
    <title>Petrol Price System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous" defer></script>
</head>
<body class="bg-dark text-white">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">PPS</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="navbar-nav ms-auto"> <!-- Align right with ms-auto -->
                    <!-- Check if user is logged in -->
                    <script defer>
                        const isLoggedIn = '<!--#isLoggedIn#-->';
                        const username = '<!--#username#-->';
                        if (isLoggedIn != 'undefined') {
                            document.write(`
                                <li class="nav-item">
                                    <a class="nav-link" aria-current="page" href="/">Home</a>
                                </li>
                                <li class="nav-item">
                                    <span class="nav-link">Welcome ${username}</span>
                                </li>
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                        Profile
                                    </a>
                                    <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                        <li><a class="dropdown-item" href="/settings">Settings</a></li>
                                        <li><a class="dropdown-item" onclick="logout()" href="">Logout</a></li>
                                    </ul>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link active" href="/tutorial">Tutorial</a>
                                </li>
                            `);
                        } else {
                            document.write(`
                                <li class="nav-item">
                                    <a class="nav-link" aria-current="page" href="/">Home</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/login">Login</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/signup">Sign Up</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link active" href="/tutorial">Tutorial</a>
                                </li>
                            `);
                        }

                        function logout() {
                            fetch('/logout', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json'
                                }
                            }).then(data => {
                                if (data.success) {
                                // Redirect after successful logout
                                window.location = '/';
                                console.log(data);
                                } else {
                                    alert('Logout failed');
                                }
                            }).catch(err => {
                                console.log(err);
                            })
                        }
                    </script>
                </ul>
            </div>
        </div>
    </nav>
    <div class="text-center">
        <h1 id="title">Petrol Pricing System Tutorial</h1>
        <p class="lead">This tutorial will guide you through the basic functions of the Petrol Pricing System.</p>
        <div class="image-container">
            <img class="img-fluid border border-primary rounded-pill border-5" src="/images/searchTutorial.png" alt="Tutorial">
            <p class="lead">The home page is the first page you will see when you visit the website. It contains a map with markers indicating the location of petrol stations. 
                The markers can be pressed and indicates the price of petrol at the station. The infobox when you press on a marker shows information on that petrol station such as: address, E10 prices, E5 price, B5 price and directions.</p>
            <img class="img-fluid border border-primary rounded-pill border-5" src="/images/infobox1.png" alt="Tutorial">
            <p class="lead">This first part of the infobox shows the first part of the information that shows up when the marker is clicked. As you can see the address is first and your can scroll down for more information.</p>
            <img class="img-fluid border border-primary rounded-pill border-5" src="/images/infobox2.png" alt="Tutorial">
            <p class="lead">The second part of the infobox shows the petrol prices. Depending on the fuel station this can have B5, E5, and E10 or fewer.</p>
            <img class="img-fluid border border-primary rounded-pill border-5" src="/images/infobox3.png" alt="Tutorial">
            <p class="lead">This last part of the infobox shows the button for directions. This button will request your location as this will send it over to bing maps and take you to a new tab for directions.
                However, due to how bing maps api works the destination api does not get auto filled and if you run an aggressive adblocker it will not work. If you have a more less strict adblocker or none at all it will load the page properly.
            </p>
            <img class="img-fluid border border-primary rounded-pill border-5" src="/images/signupTutorial.png" alt="Tutorial">
            <p class="lead">The signup should be easy for any user to use. You input a username, password, confirm password and fill in the google captcha. However, if your password is found in a breach it will not allow you to create an account or
                if the username already exists. There are no requirements for the password as we believe that the user should be able to choose their own password. The google captcha is there to prevent bots from creating accounts. The password breach 
                check is there to prevent users from using a password that has been found in a breach.
            </p>
            <img class="img-fluid border border-primary rounded-pill border-5" src="/images/signinTutorial.png" alt="Tutorial">
            <p class="lead">This is should be easy. All you do is input your username and password. However, you will be prompted for the 2FA (2 factor authentication) if you have set it up.</p>
            <img class="img-fluid border border-primary rounded-pill border-5" src="/images/settingAndSignout.png" alt="Tutorial">
            <p class="lead">To go to settings to change password, delete account or add 2FA you will need to go to the navigation bar and click the dropdown labelled 'Profile'. Here you can logout or go to settings to change password, delete account and add 2FA.</p>
            <img class="img-fluid border border-primary rounded-pill border-5" src="/images/settingsPage.png" alt="Tutorial">
            <p class="lead">This is the settings page. Here you can change your password, delete your account and add 2FA. To change your password you will need to input your current password and then your new password and save changes. 
                To delete your account you will need to input your password on the pop up and then click the delete account button.</p>
            <img class="img-fluid border border-primary rounded border-5" src="/images/2faSetup.png" alt="Tutorial">
            <p class="lead">To add 2FA you will need to click the button and then scan the QR code with your authenticator app. Then you will need to input the 6 digit code from your authenticator app and click submit.</p>
        </div>
    </div>
</body>
</html>